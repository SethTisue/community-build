// https://github.com/scalacommunitybuild/akka-persistence-jdbc.git#community-build-2.12  # was dnvriend, v3.5.2

// dependency of lagom. frozen at version lagom currently (December 2019) expects

// then forked (August 2022) to cherry-pick a later commit that removes unused
// code that uses scala.xml.pull (which is removed in scala-xml 2.0)

vars.proj.akka-persistence-jdbc: ${vars.base} {
  name: "akka-persistence-jdbc"
  uri: "https://github.com/scalacommunitybuild/akka-persistence-jdbc.git#e657abaac61d6ae89f19b53692e454e4dded3060"

  extra.options: ["-Dbintray.user=dummy", "-Dbintray.pass=dummy"]
  extra.settings: ${vars.base.extra.settings} [
    // don't fail on scala-xml 1.x vs 2.x conflict
    // (one-deeper nesting level makes it apply to build definition)
    ["evictionErrorLevel := Level.Warn"]
  ]
  extra.commands: ${vars.default-commands} [
    "set every bintrayReleaseOnPublish := false"
  ]
  // it isn't clear to me that there are any tests we can run without
  // doing the Docker stuff in their test.sh script.  we might ask the
  // Akka team if there is any segregation between unit vs. integration tests,
  // that kind of thing?
  extra.test-tasks: "compile"
}
