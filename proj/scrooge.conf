// https://github.com/twitter/scrooge.git#master

// dependency of scrooge-shapes.
// for now anyway, we're only attempting to build the core project,
// since that's what scrooge-shapes needs.

vars.proj.scrooge: ${vars.base} {
  name: "scrooge"
  uri: "https://github.com/twitter/scrooge.git#dfdb68cf6b9c501dbbe3ae644504bf403ad76bfa"

  extra.projects: ["scrooge-core"]
  // ScalaTest 3.0, not 3.1
  deps.inject: ${vars.base.deps.inject} ["scalacommunitybuild#scalatest"]
  extra.commands: ${vars.default-commands} [
    // ScalaTest 3.0, not 3.1
    "removeDependency org.scalatest scalatest"
    """set libraryDependencies in ThisBuild += "scalacommunitybuild" %% "scalatest" % "0""""
    // the usual bintray stuff
    "set every bintrayReleaseOnPublish := false"
    "set every bintrayOmitLicense := true"  // otherwise it complains we don't have one
    // not supported on JDK 11+
    "removeJavaOptions -XX:+UseParNewGC"
  ]
  extra.options: ["-Dbintray.user=dummy", "-Dbintray.pass=dummy"]
  // ignore missing scripted-sbt (https://github.com/sbt/sbt/issues/3917 ?)
  deps.ignore: ["org.scala-sbt#scripted-sbt"]
  check-missing: false
}
