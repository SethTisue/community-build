// https://github.com/bmc/classutil.git#master

// dependency of giter8

vars.proj.classutil: ${vars.base} {
  name: "classutil"
  uri: "https://github.com/bmc/classutil.git#42899a54333d13aebf591e694ab22926659d8eb0"

  extra.options: [
    "-Dbintray.user=dummy", "-Dbintray.pass=dummy"
    // without this, tests fail with
    // java.lang.reflect.InaccessibleObjectException:
    //   Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int) throws java.lang.ClassFormatError accessible: module java.base does not "opens java.lang" to unnamed module @2a0a80c0
    "--illegal-access=permit"
  ]
  extra.commands: ${vars.default-commands} [
    "set every bintrayReleaseOnPublish := false"
    "set every bintrayOmitLicense := true"
    // ScalaTest 3.0, not 3.2
    "removeDependency org.scalatest scalatest"
    """set libraryDependencies in ThisBuild += "scalacommunitybuild" %% "scalatest" % "0" % Test"""
    // for JDK 16; javaOptions affects tests running forked
    """set ThisBuild / javaOptions ++= Seq("--illegal-access=permit", "-XX:+IgnoreUnrecognizedVMOptions")"""
  ]
  deps.inject: ${vars.base.deps.inject} ["scalacommunitybuild#scalatest"]
}
