// https://github.com/scalameta/scalafmt.git#21b2cdcaceb39d515e5fd03a52e66c20d49b4edf  # was master

// frozen (October 2022) at a commit before an upgrade to Scalameta 4.6.0,
// which we aren't on yet (scalafmt, scalafix, and metals must all be on board
// first)

vars.proj.scalafmt: ${vars.base} {
  name: "scalafmt"
  uri: "https://github.com/scalameta/scalafmt.git#21b2cdcaceb39d515e5fd03a52e66c20d49b4edf"

  extra.settings: ${vars.base.extra.settings} [
    // don't fail on scala-xml 1.x vs 2.x conflict
    // (one-deeper nesting level makes it apply to build definition)
    ["evictionErrorLevel := Level.Warn"]
  ]
  extra.projects: ["coreJVM", "cli", "tests"]
  // not investigated. at first glance they look environment-dependent
  extra.commands: ${vars.default-commands} [
    """set tests / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "CliTest.scala" || "GitOpsTest.scala""""
    """set dynamic / Test / unmanagedSources / excludeFilter := HiddenFileFilter || "DynamicSuite.scala""""
  ]
}
